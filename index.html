<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Homework 3</title>
    <script src="https://d3js.org/d3.v3.js"></script>
</head>
</head>
<body>
   <h1>Ex 1</h1>
   <svg width="400" height="300"></svg>   
   <br>
   <hr>
    
   <h1>Ex 2</h1>
   <div></div>
    <script>
        d3.json("invoice-taipei.json",function(dataSet){            
            var svg = d3.select("svg");
            var cnt = 0;
            for(var i=0;i<dataSet.length;i++){
                var data = dataSet[i];
                if(data.amount>1000000000 && data.date==="2016/8/1" && data.cid==="A"){
                    svg.append("rect").attr({
                                        x:260,
                                        y:24*cnt,
                                        width:data.amount/100000000,
                                        height:18,
                                        fill:"red"
                                       });
                    svg.append("text").attr({
                                        x:10,
                                        y:15+24*cnt,
                                       })
                                      .text(data.industry);
                    cnt++;
                }
                
            }
        });
        
        var arr=[85,60,99,49,77,82];
        bind(arr);
        render();
        
        function bind(data){
            var selection = d3.select("body")
                              .selectAll("div")
                              .data(data);
            selection.enter().append("div");
            selection.exit().remove();
        }
        function render(){
            d3.selectAll("div")
              .style({
                 color: function(d){
                           if(d<70){
                             return "red"
                           }else{
                             return "black"
                           }
                         }
              })
              .text(function(d,i){
                return (i+1)+":"+d;
              })
        }
    </script>



</body>
</html>
